<script src="n64wasm.js"></script>
<script src="script.js"></script>
<script>
  window.onload = function() {
    fetch('roms/SuperMario64.z64')
      .then(response => response.arrayBuffer())
      .then(buffer => {
        // Mount the ROM into the Emscripten virtual filesystem
        Module.FS_createDataFile('/', 'SuperMario64.z64', new Uint8Array(buffer), true, false);

        // Start the emulator (change the function name if yours is different)
        if (typeof startEmulator === 'function') {
          startEmulator('SuperMario64.z64');
        } else if (typeof Module.callMain === 'function') {
          Module.callMain(['SuperMario64.z64']);
        } else {
          console.error('No start function found for the emulator.');
        }
      })
      .catch(err => console.error('Failed to load ROM:', err));
  };
</script>
